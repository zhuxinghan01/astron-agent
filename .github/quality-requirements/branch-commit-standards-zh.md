# åˆ†æ”¯ä¸æäº¤è§„èŒƒ

æœ¬æ–‡æ¡£å®šä¹‰äº†é¡¹ç›®çš„åˆ†æ”¯ç®¡ç†å’Œæäº¤æ¶ˆæ¯è§„èŒƒï¼Œç¡®ä¿å›¢é˜Ÿåä½œçš„ä¸€è‡´æ€§å’Œä»£ç è´¨é‡ã€‚

## åˆ†æ”¯ç®¡ç†è§„èŒƒ

### åˆ†æ”¯ç±»å‹

| åˆ†æ”¯ç±»å‹ | å‘½åæ ¼å¼ | ç”¨é€” | ç¤ºä¾‹ |
|---------|---------|------|------|
| **ä¸»åˆ†æ”¯** | `main` | ç”Ÿäº§ç¯å¢ƒä»£ç  | `main` |
| **å¼€å‘åˆ†æ”¯** | `develop` | å¼€å‘é›†æˆåˆ†æ”¯ | `develop` |
| **åŠŸèƒ½åˆ†æ”¯** | `feature/åŠŸèƒ½å` | æ–°åŠŸèƒ½å¼€å‘ | `feature/user-login` |
| **ä¿®å¤åˆ†æ”¯** | `bugfix/é—®é¢˜å` | Bugä¿®å¤ | `bugfix/auth-error` |
| **çƒ­ä¿®å¤åˆ†æ”¯** | `hotfix/è¡¥ä¸å` | ç´§æ€¥ä¿®å¤ | `hotfix/security-patch` |
| **è®¾è®¡åˆ†æ”¯** | `design/è®¾è®¡å` | UI/UXä¼˜åŒ– | `design/mobile-layout` |
| **é‡æ„åˆ†æ”¯** | `refactor/é‡æ„å` | ä»£ç é‡æ„ | `refactor/user-service` |
| **æµ‹è¯•åˆ†æ”¯** | `test/æµ‹è¯•å` | æµ‹è¯•å¼€å‘ | `test/integration-tests` |
| **æ–‡æ¡£åˆ†æ”¯** | `doc/æ–‡æ¡£å` | æ–‡æ¡£æ›´æ–° | `doc/api-guide` |

### åˆ†æ”¯åˆ›å»ºå‘½ä»¤

```bash
# ä½¿ç”¨Makefileå‘½ä»¤åˆ›å»ºè§„èŒƒåˆ†æ”¯
make new-feature name=user-login      # åˆ›å»ºåŠŸèƒ½åˆ†æ”¯
make new-bugfix name=auth-error       # åˆ›å»ºä¿®å¤åˆ†æ”¯
make new-hotfix name=security-patch   # åˆ›å»ºçƒ­ä¿®å¤åˆ†æ”¯
make new-design name=mobile-layout    # åˆ›å»ºè®¾è®¡åˆ†æ”¯

# æ‰‹åŠ¨åˆ›å»ºåˆ†æ”¯
git checkout -b feature/user-login
git checkout -b bugfix/auth-error
git checkout -b hotfix/security-patch
```

### åˆ†æ”¯å·¥ä½œæµ

```bash
# 1. ä»mainåˆ†æ”¯åˆ›å»ºåŠŸèƒ½åˆ†æ”¯
git checkout main
git pull origin main
git checkout -b feature/user-login

# 2. å¼€å‘å®Œæˆååˆå¹¶åˆ°develop
git checkout develop
git merge feature/user-login
git push origin develop

# 3. é€šè¿‡Pull Requeståˆå¹¶åˆ°main
# åœ¨GitHubä¸Šåˆ›å»ºPR: develop â†’ main
```

## æäº¤æ¶ˆæ¯è§„èŒƒ

### æäº¤ç±»å‹

| ç±»å‹ | è¯´æ˜ | ç¤ºä¾‹ |
|------|------|------|
| `feat` | æ–°åŠŸèƒ½ | `feat: æ”¯æŒæ‰‹æœºå·ç™»å½•` |
| `fix` | Bugä¿®å¤ | `fix: è§£å†³tokenè¿‡æœŸé—®é¢˜` |
| `docs` | æ–‡æ¡£æ›´æ–° | `docs: å®Œå–„APIè¯´æ˜` |
| `style` | ä»£ç æ ¼å¼ | `style: ç»Ÿä¸€ç¼©è¿›æ ¼å¼` |
| `refactor` | ä»£ç é‡æ„ | `refactor: æ‹†åˆ†ç”¨æˆ·æœåŠ¡` |
| `perf` | æ€§èƒ½ä¼˜åŒ– | `perf: ä¼˜åŒ–æ•°æ®åº“æŸ¥è¯¢` |
| `test` | æµ‹è¯•ç›¸å…³ | `test: æ·»åŠ å•å…ƒæµ‹è¯•` |
| `build` | æ„å»ºç³»ç»Ÿ | `build: å‡çº§webpackåˆ°5.0` |
| `ci` | CI/CDé…ç½® | `ci: æ·»åŠ GitHub Actions` |
| `chore` | æ‚é¡¹ä»»åŠ¡ | `chore: æ›´æ–°.gitignore` |
| `revert` | å›æ»šæäº¤ | `revert: å›æ»šcommit abc123` |

### æäº¤æ ¼å¼

```
<type>(<scope>): <description>

[optional body]

[optional footer(s)]
```

### æ ¼å¼è¦æ±‚

- **ç±»å‹**: å¿…é¡»ä½¿ç”¨ä¸Šè¿°é¢„å®šä¹‰ç±»å‹
- **èŒƒå›´**: å¯é€‰ï¼Œè¡¨ç¤ºå½±å“èŒƒå›´ï¼ˆå¦‚æ¨¡å—åï¼‰
- **æè¿°**: ç®€æ´æ˜äº†ï¼Œä½¿ç”¨ä¸­æ–‡
- **é•¿åº¦**: æ ‡é¢˜ä¸è¶…è¿‡50å­—ç¬¦ï¼Œæ­£æ–‡æ¯è¡Œä¸è¶…è¿‡72å­—ç¬¦
- **æ—¶æ€**: ä½¿ç”¨ç°åœ¨æ—¶ï¼Œå¦‚"æ·»åŠ "è€Œä¸æ˜¯"æ·»åŠ äº†"

### æäº¤ç¤ºä¾‹

```bash
# åŸºç¡€æ ¼å¼
feat: æ·»åŠ ç”¨æˆ·ç™»å½•åŠŸèƒ½
fix: ä¿®å¤å¯†ç éªŒè¯bug
docs: æ›´æ–°APIæ–‡æ¡£

# å¸¦èŒƒå›´çš„æ ¼å¼
feat(auth): æ·»åŠ OAuth2ç™»å½•æ”¯æŒ
fix(api): ä¿®å¤ç”¨æˆ·ä¿¡æ¯æŸ¥è¯¢æ¥å£
docs(guide): å®Œå–„å¿«é€Ÿå¼€å§‹æŒ‡å—

# è¯¦ç»†æ ¼å¼
feat: æ·»åŠ ç”¨æˆ·æƒé™ç®¡ç†

- å®ç°è§’è‰²åŸºç¡€æƒé™æ§åˆ¶
- æ·»åŠ æƒé™éªŒè¯ä¸­é—´ä»¶
- æ›´æ–°ç”¨æˆ·ç®¡ç†ç•Œé¢

Closes #123
```

## è´¨é‡é—¨ç¦

### æäº¤å‰æ£€æŸ¥

```bash
# è‡ªåŠ¨è¿è¡Œï¼ˆé€šè¿‡Git hooksï¼‰
make format    # ä»£ç æ ¼å¼åŒ–
make check     # è´¨é‡æ£€æŸ¥
make test      # è¿è¡Œæµ‹è¯•

# æ‰‹åŠ¨æ£€æŸ¥
make check-branch    # æ£€æŸ¥åˆ†æ”¯å‘½å
make safe-push       # å®‰å…¨æ¨é€
```

### æ£€æŸ¥é¡¹ç›®

- **ä»£ç æ ¼å¼**: è‡ªåŠ¨æ ¼å¼åŒ–æ‰€æœ‰è¯­è¨€ä»£ç 
- **è¯­æ³•æ£€æŸ¥**: é€šè¿‡å„è¯­è¨€çš„lintå·¥å…·
- **ç±»å‹æ£€æŸ¥**: TypeScript/Pythonç±»å‹éªŒè¯
- **å¤æ‚åº¦æ§åˆ¶**: å‡½æ•°å¤æ‚åº¦é™åˆ¶
- **åˆ†æ”¯å‘½å**: éªŒè¯åˆ†æ”¯å‘½åè§„èŒƒ
- **æäº¤æ¶ˆæ¯**: éªŒè¯æäº¤æ¶ˆæ¯æ ¼å¼

## æœ€ä½³å®è·µ

### å¼€å‘æµç¨‹

1. **å¼€å§‹å¼€å‘**: `make dev-setup` (é¦–æ¬¡) â†’ `make new-feature name=åŠŸèƒ½å`
2. **ç¼–å†™ä»£ç **: é¢‘ç¹commitï¼Œä½¿ç”¨è§„èŒƒçš„commit message
3. **æäº¤å‰æ£€æŸ¥**: `make fmt && make check` ç¡®ä¿è´¨é‡
4. **æ¨é€ä»£ç **: `make safe-push` éªŒè¯å¹¶æ¨é€
5. **åˆ›å»ºPR**: é€šè¿‡GitHubç•Œé¢åˆ›å»ºPull Request
6. **ä»£ç å®¡æŸ¥**: å›¢é˜Ÿreviewï¼Œä¿®æ”¹å»ºè®®
7. **åˆå¹¶ä»£ç **: å®¡æŸ¥é€šè¿‡ååˆå¹¶åˆ°ä¸»åˆ†æ”¯

### å›¢é˜Ÿçº¦å®š

- ğŸš« **ç¦æ­¢ç›´æ¥æ¨é€åˆ°main/developåˆ†æ”¯**
- âœ… **å¿…é¡»é€šè¿‡åˆ†æ”¯å¼€å‘ + PRæµç¨‹**
- âœ… **æäº¤å‰å¿…é¡»é€šè¿‡æ‰€æœ‰è´¨é‡æ£€æŸ¥**
- âœ… **ä½¿ç”¨è§„èŒƒçš„åˆ†æ”¯å‘½åå’Œæäº¤æ¶ˆæ¯**
- âœ… **å¤§åŠŸèƒ½æ‹†åˆ†ä¸ºå°commitï¼Œä¾¿äºreview**

## å¸¸è§é—®é¢˜

### åˆ†æ”¯ç®¡ç†é—®é¢˜

**é—®é¢˜**: åœ¨é”™è¯¯åˆ†æ”¯å¼€å‘
**è§£å†³**: ä½¿ç”¨gitå‘½ä»¤è¿ç§»ä»£ç åˆ°æ­£ç¡®åˆ†æ”¯
```bash
git stash
git checkout -b feature/correct-branch
git stash pop
```

**é—®é¢˜**: åˆ†æ”¯åä¸è§„èŒƒ
**è§£å†³**: é‡å‘½ååˆ†æ”¯æˆ–åˆ›å»ºæ–°çš„è§„èŒƒåˆ†æ”¯
```bash
git branch -m old-branch-name feature/new-name
```

### æäº¤é—®é¢˜

**é—®é¢˜**: æäº¤æ¶ˆæ¯æ ¼å¼é”™è¯¯
**è§£å†³**: ä½¿ç”¨ `git commit --amend` ä¿®æ”¹æœ€è¿‘ä¸€æ¬¡æäº¤
```bash
git commit --amend -m "feat: æ­£ç¡®çš„æäº¤æ¶ˆæ¯"
```

**é—®é¢˜**: è´¨é‡æ£€æŸ¥å¤±è´¥
**è§£å†³**: è¿è¡Œ `make check` æŸ¥çœ‹è¯¦ç»†é”™è¯¯ï¼Œä¿®å¤åé‡æ–°æäº¤

## ç›¸å…³æ–‡æ¡£

- [ä»£ç è´¨é‡è¦æ±‚](./code-requirements-zh.md) - å„è¯­è¨€ä»£ç è´¨é‡æ£€æµ‹
- [Makefileä½¿ç”¨æŒ‡å—](../docs/Makefile-readme-zh.md) - å®Œæ•´çš„Makefileå‘½ä»¤è¯´æ˜
- [æœ¬åœ°å¼€å‘é…ç½®](../docs/Makefile-readme-zh.md#æœ¬åœ°å¼€å‘é…ç½®) - ä½¿ç”¨`.localci.toml`è¿›è¡Œæ¨¡å—åŒ–å¼€å‘
